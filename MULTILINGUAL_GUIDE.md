# Руководство по мультиязычности

## Поддерживаемые языки

Платформа поддерживает 4 языка:
- **English (en)** - Английский
- **Русский (ru)** - Русский
- **ไทย (th)** - Тайский
- **中文 (zh)** - Китайский

## Как работает система переводов

### 1. Автоматическое определение языка

Система определяет язык в следующем порядке приоритета:
1. GET параметр `?lang=en` (для переключения)
2. Язык из сессии пользователя
3. Язык из профиля пользователя (в БД)
4. Язык по умолчанию (английский)

### 2. Переключение языка

Пользователь может переключить язык:
- Через выпадающий список в навигации
- Через URL: `/lang/{code}` (например: `/lang/ru`)

Выбранный язык сохраняется:
- В сессии
- В профиле пользователя (для авторизованных)

### 3. Использование переводов в коде

#### В PHP (контроллеры, представления):

```php
use App\Core\Lang;

// Получить перевод
$text = Lang::get('auth.login');

// С параметрами
$text = Lang::get('messages.welcome', ['name' => 'John']);
// В файле перевода: 'welcome' => 'Welcome, :name!'

// Получить текущий язык
$currentLang = Lang::get('current');

// Установить язык
Lang::set('ru');
```

#### В представлениях (views):

```php
<?php use App\Core\Lang; ?>
<h1><?= Lang::get('dashboard.title') ?></h1>
<button><?= Lang::get('common.save') ?></button>
```

## Структура файлов переводов

Файлы переводов находятся в директории `lang/`:
- `lang/en.php` - Английский
- `lang/ru.php` - Русский
- `lang/th.php` - Тайский
- `lang/zh.php` - Китайский

### Формат файла перевода:

```php
<?php
return [
    'section' => [
        'key' => 'Translation text',
        'nested' => [
            'key' => 'Nested translation',
        ],
    ],
];
```

### Использование вложенных ключей:

```php
Lang::get('section.nested.key');
```

## Добавление новых переводов

### 1. Добавьте ключ во все языковые файлы:

**lang/en.php:**
```php
'new_section' => [
    'new_key' => 'New text in English',
],
```

**lang/ru.php:**
```php
'new_section' => [
    'new_key' => 'Новый текст на русском',
],
```

**lang/th.php:**
```php
'new_section' => [
    'new_key' => 'ข้อความใหม่ในภาษาไทย',
],
```

**lang/zh.php:**
```php
'new_section' => [
    'new_key' => '中文新文本',
],
```

### 2. Используйте в коде:

```php
<?= Lang::get('new_section.new_key') ?>
```

## Текущие разделы переводов

- `app` - Название приложения
- `auth` - Аутентификация (вход, регистрация)
- `dashboard` - Панель пользователя
- `admin` - Панель администратора
- `video` - Работа с видео
- `common` - Общие элементы (кнопки, сообщения)
- `status` - Статусы задач
- `messages` - Системные сообщения

## Добавление нового языка

1. Создайте файл `lang/{code}.php` (например: `lang/de.php` для немецкого)

2. Добавьте код языка в `app/Core/Lang.php`:
```php
private static array $supportedLangs = ['en', 'ru', 'th', 'zh', 'de'];
```

3. Добавьте название языка:
```php
$names = [
    'en' => 'English',
    'ru' => 'Русский',
    'th' => 'ไทย',
    'zh' => '中文',
    'de' => 'Deutsch', // Новый язык
];
```

4. Скопируйте структуру из `lang/en.php` и переведите все строки

## Рекомендации

1. **Всегда добавляйте переводы во все языки** - не оставляйте пустых ключей
2. **Используйте описательные ключи** - `auth.login` лучше чем `login1`
3. **Группируйте по разделам** - логическая организация упрощает поддержку
4. **Используйте параметры** - для динамических значений: `Welcome, :name!`
5. **Тестируйте все языки** - особенно языки с другой письменностью (тайский, китайский)

## Отладка

Если перевод не найден, система вернет сам ключ:
- `Lang::get('missing.key')` вернет `'missing.key'`

Это помогает быстро найти отсутствующие переводы.

## Производительность

Переводы загружаются один раз при инициализации и кэшируются в памяти.
Система автоматически переключается на английский, если файл языка не найден.
