# Как получить видео с наложенными кнопками

## Полный процесс от начала до конца

### Шаг 1: Создать пресет с кнопками

1. Войдите в систему: `https://videoeditor.1tlt.ru/login`
2. Перейдите в Dashboard
3. Найдите секцию **"Мои пресеты"**
4. Нажмите кнопку **"Создать новый пресет"**
5. В модальном окне:
   - Введите название пресета (например: "Мой первый пресет")
   - Нажмите **"Добавить кнопку Subscribe"** - добавит кнопку подписки
   - Нажмите **"Добавить кнопку Like"** - добавит кнопку лайка
   - Нажмите **"Добавить заголовок"** - добавит текстовый заголовок
6. Для каждого элемента настройте:
   - **Позиция X**: Слева / По центру / Справа
   - **Позиция Y**: Сверху / По центру / Снизу
   - **Время появления** (в секундах от начала видео)
   - **Время исчезновения** (необязательно, можно оставить пустым - будет до конца видео)
7. Нажмите **"Создать пресет"**

### Шаг 2: Загрузить видео

1. В секции **"Загрузить видео"** нажмите **"Выбрать файл"**
2. Выберите видеофайл (поддерживаются: MP4, MOV, AVI, MKV, WEBM)
3. Нажмите **"Upload"**
4. Дождитесь сообщения об успешной загрузке
5. Видео появится в таблице **"Мои видео"**

### Шаг 3: Запустить обработку (рендеринг)

1. В таблице **"Мои видео"** найдите ваше загруженное видео
2. В колонке **"Действия"**:
   - Выберите созданный пресет из выпадающего списка
   - Нажмите кнопку **"Render"** (Обработать)
3. Система создаст задачу на обработку
4. Кредиты будут списаны автоматически (стоимость зависит от длительности видео)

### Шаг 4: Дождаться обработки

1. Перейдите в секцию **"Задачи рендеринга"**
2. Найдите вашу задачу в таблице
3. Отслеживайте статус:
   - **pending** - ожидает обработки
   - **processing** - обрабатывается
   - **completed** - готово к скачиванию
   - **failed** - ошибка обработки

**ВАЖНО:** Для обработки видео должен быть запущен воркер на сервере!

### Шаг 5: Скачать готовое видео

1. Когда статус задачи станет **"completed"**, появится кнопка **"Download"**
2. Нажмите кнопку **"Download"**
3. Видео начнет скачиваться на ваш компьютер
4. Готовое видео будет в формате MP4 с наложенными кнопками

---

## Проверка работы воркера на сервере

Если видео долго обрабатывается или статус остается "pending", проверьте воркер:

```bash
# Проверить статус воркера
sudo systemctl status video-worker

# Если воркер не запущен, запустить его
sudo systemctl start video-worker

# Включить автозапуск при перезагрузке
sudo systemctl enable video-worker

# Просмотр логов воркера
sudo journalctl -u video-worker -f
```

Или запустить воркер вручную для тестирования:

```bash
cd /ssd/www/videoeditor
php scripts/worker.php
```

---

## Возможные проблемы

### Видео не обрабатывается (статус "pending")

**Причина:** Воркер не запущен  
**Решение:** Запустить воркер (см. выше)

### Недостаточно кредитов

**Причина:** Не хватает кредитов для обработки  
**Решение:** 
- Пополните баланс через админ-панель (если вы администратор)
- Или попросите администратора добавить кредиты

### Ошибка обработки (статус "failed")

**Причина:** Проблема с FFmpeg или видеофайлом  
**Решение:**
- Проверьте логи: `tail -f /ssd/www/videoeditor/storage/logs/php_errors.log`
- Убедитесь что FFmpeg установлен: `ffmpeg -version`
- Проверьте формат видеофайла

### Кнопка Download не появляется

**Причина:** Задача еще не завершена или завершилась с ошибкой  
**Решение:** 
- Дождитесь статуса "completed"
- Если статус "failed", проверьте логи и попробуйте создать задачу заново

---

## Пример использования

1. **Создайте пресет:**
   - Название: "Subscribe + Like"
   - Добавьте кнопку Subscribe (позиция: справа, снизу)
   - Добавьте кнопку Like (позиция: слева, снизу)
   - Время появления: 2 секунды
   - Создайте пресет

2. **Загрузите видео:**
   - Выберите ваше видео
   - Загрузите

3. **Обработайте:**
   - Выберите пресет "Subscribe + Like"
   - Нажмите Render

4. **Скачайте:**
   - Дождитесь статуса "completed"
   - Нажмите Download

Готово! У вас есть видео с наложенными кнопками.
